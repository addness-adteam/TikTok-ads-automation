# åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– è¦ä»¶å®šç¾©æ›¸

## 1. æ¦‚è¦

### 1.1 èƒŒæ™¯
ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ã¯æ—¥äºˆç®—ã‚’ç¾çŠ¶ç¶­æŒã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒä¸­å¿ƒã§ã‚ã‚Šã€åºƒå‘Šã®ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™é‹ç”¨ãŒã§ãã¦ã„ãªã„ã€‚ä¾‹ãˆã°ã€CPA 5,000å††ã§é…ä¿¡ã—ç¶šã‘ã¦ã„ã‚‹åºƒå‘ŠãŒã€å®Ÿéš›ã«ã¯2,000å††å°ã§é…ä¿¡ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

### 1.2 ç›®çš„
- **åºƒå‘Šï¼ˆAdï¼‰å˜ä½**ã§éå»æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆCPAï¼‰ã‚’è¨˜éŒ²ãƒ»è¿½è·¡ã—ã€ç¾åœ¨ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã®ä¹–é›¢ã‚’å¯è¦–åŒ–
- å®šæœŸçš„ãªåºƒå‘Šè¦‹ç›´ã—ãƒˆãƒªã‚¬ãƒ¼ã«ã‚ˆã‚‹é…ä¿¡é¢ã®æœ€é©åŒ–
- ä¸Šé™æ—¥äºˆç®—ã®è¨­å®šã«ã‚ˆã‚‹éå‰°ãªäºˆç®—å¢—é¡ã®é˜²æ­¢
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ã®é€šçŸ¥æ©Ÿèƒ½ã«ã‚ˆã‚‹é‹ç”¨è€…ã¸ã®é©åˆ‡ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æç¤º

### 1.3 å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼
- åºƒå‘Šé‹ç”¨æ‹…å½“è€…
- ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…

### 1.4 é‡è¦ãªè¨­è¨ˆåˆ¤æ–­

| é …ç›® | æ±ºå®šäº‹é … | ç†ç”± |
|------|----------|------|
| è©•ä¾¡å˜ä½ | **åºƒå‘Šï¼ˆAdï¼‰å˜ä½** | åŒä¸€Creativeã§ã‚‚åºƒå‘Šåãƒ»é…ä¿¡é¢ãƒ»ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ãŒç•°ãªã‚‹ãŸã‚å€‹åˆ¥è©•ä¾¡ãŒå¿…è¦ |
| ãƒªãƒ¼ãƒã®å®šç¾© | **impressionsï¼ˆè¡¨ç¤ºå›æ•°ï¼‰ã‚’ä½¿ç”¨** | TikTok APIã§reachãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒå–å¾—å›°é›£ãªãŸã‚ |
| CPAè¨ˆç®—å…ƒ | **Google Sheets CVæ•°** | å®Ÿãƒ“ã‚¸ãƒã‚¹ä¸Šã®æ­£ç¢ºãªæ•°å€¤ã‚’ä½¿ç”¨ |
| ä¸Šé™æ—¥äºˆç®—ã®é©ç”¨ | **åºƒå‘Šã‚»ãƒƒãƒˆå†…ã®æœ€å°å€¤ã‚’æ¡ç”¨** | æœ€ã‚‚å³ã—ã„åˆ¶é™ã‚’é©ç”¨ã—ã¦éå‰°é…ä¿¡ã‚’é˜²æ­¢ |
| åˆæœŸãƒ‡ãƒ¼ã‚¿ | **ç©ºã§é–‹å§‹** | ãƒªãƒªãƒ¼ã‚¹æ—¥ä»¥é™ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿è“„ç© |

---

## 2. æ©Ÿèƒ½è¦ä»¶

### 2.1 éå»æœ€é«˜CPAè¨˜éŒ²ãƒ»ä¹–é›¢é€šçŸ¥æ©Ÿèƒ½

#### 2.1.1 éå»æœ€é«˜CPAã®è¨˜éŒ²æ¡ä»¶
| é …ç›® | æ¡ä»¶ |
|------|------|
| å¯¾è±¡ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | **åºƒå‘Šï¼ˆAdï¼‰å˜ä½** |
| è¨˜éŒ²æ¡ä»¶ | **ç´¯è¨ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³æ•°ãŒ100,000ä»¥ä¸Š**ã‚’é”æˆã—ã¦ã„ã‚‹ã“ã¨ |
| è¨˜éŒ²ã‚¿ã‚¤ãƒŸãƒ³ã‚° | æ—¥æ¬¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹åŒæœŸæ™‚ã«æ¡ä»¶ã‚’æº€ãŸã—ãŸåºƒå‘Šã®éå»æœ€é«˜CPAã‚’æ›´æ–° |
| è¨˜éŒ²å¯¾è±¡æœŸé–“ | æ¡ä»¶é”æˆå¾Œã®ã™ã¹ã¦ã®æ—¥æ¬¡CPA |
| CPAè¨ˆç®—æ–¹æ³• | **Google Sheets CVæ•°ã‚’ä½¿ç”¨**ï¼ˆæ¶ˆåŒ–é¡ Ã· Google Sheets CVæ•°ï¼‰ |

#### 2.1.2 ä¹–é›¢é€šçŸ¥æ¡ä»¶
| é …ç›® | æ¡ä»¶ |
|------|------|
| ä¹–é›¢åˆ¤å®šé–¾å€¤ | éå»æœ€é«˜CPAã¨æ¯”è¼ƒã—ã¦**20%ä»¥ä¸Šæ‚ªåŒ–**ï¼ˆç¾åœ¨ã®CPA â‰¥ éå»æœ€é«˜CPA Ã— 1.2ï¼‰ |
| é€šçŸ¥å…ˆ | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ |
| é€šçŸ¥é »åº¦ | ä¹–é›¢æ¤œå‡ºæ™‚ï¼ˆæ—¥æ¬¡ãƒã‚§ãƒƒã‚¯ï¼‰ |

#### 2.1.3 é€šçŸ¥å†…å®¹
```
ã€CPAä¹–é›¢ã‚¢ãƒ©ãƒ¼ãƒˆã€‘
åºƒå‘Šå: {adName}
åºƒå‘ŠID: {adId}
éå»æœ€é«˜CPA: Â¥{bestCPA}
ç¾åœ¨ã®CPA: Â¥{currentCPA}
ä¹–é›¢ç‡: {deviationRate}%
ç´¯è¨ˆæ¶ˆåŒ–é¡: Â¥{totalSpend}
ç´¯è¨ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³æ•°: {totalImpressions}

æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:
- åˆ¥ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã§ã®å†é…ä¿¡ã‚’æ¤œè¨
- ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹è¨­å®šã®è¦‹ç›´ã—
- é…ä¿¡é¢ï¼ˆPlacementï¼‰ã®å¤‰æ›´ã‚’æ¤œè¨
```

### 2.2 æ¶ˆåŒ–é¡ãƒˆãƒªã‚¬ãƒ¼ã«ã‚ˆã‚‹åºƒå‘Šè¦‹ç›´ã—æ©Ÿèƒ½

#### 2.2.1 ãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶
| é …ç›® | æ¡ä»¶ |
|------|------|
| ãƒˆãƒªã‚¬ãƒ¼å˜ä½ | **åºƒå‘Šï¼ˆAdï¼‰å˜ä½** |
| ãƒˆãƒªã‚¬ãƒ¼é–¾å€¤ | **æ¶ˆåŒ–é¡ãŒ100,000å††å¢—åŠ ã™ã‚‹ã”ã¨** |
| è¨ˆç®—åŸºæº– | å‰å›è¦‹ç›´ã—æ™‚ç‚¹ã‹ã‚‰ã®ç´¯è¨ˆæ¶ˆåŒ–é¡ |

#### 2.2.2 è¦‹ç›´ã—æ™‚ã®è©•ä¾¡é …ç›®
1. **CPAã®æ¨ç§»**
   - éå»æœ€é«˜CPAã¨ã®æ¯”è¼ƒ
   - ç›´è¿‘7æ—¥é–“ã®å¹³å‡CPA
   - ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆæ”¹å–„å‚¾å‘/æ‚ªåŒ–å‚¾å‘ï¼‰

2. **ãƒ•ãƒ­ãƒ³ãƒˆCPOã®æ¨ç§»**
   - éå»æœ€é«˜ãƒ•ãƒ­ãƒ³ãƒˆCPOã¨ã®æ¯”è¼ƒ
   - ç›´è¿‘7æ—¥é–“ã®å¹³å‡ãƒ•ãƒ­ãƒ³ãƒˆCPO

3. **é…ä¿¡åŠ¹ç‡**
   - CTRï¼ˆã‚¯ãƒªãƒƒã‚¯ç‡ï¼‰ã®å¤‰åŒ–
   - CVRï¼ˆã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡ï¼‰ã®å¤‰åŒ–

#### 2.2.3 è¦‹ç›´ã—é€šçŸ¥å†…å®¹
```
ã€åºƒå‘Šå®šæœŸè¦‹ç›´ã—ã€‘
åºƒå‘Šå: {adName}
ãƒˆãƒªã‚¬ãƒ¼: æ¶ˆåŒ–é¡ Â¥{spendSinceLastReview} åˆ°é”ï¼ˆç´¯è¨ˆ: Â¥{totalSpend}ï¼‰

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚µãƒãƒªãƒ¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŒ‡æ¨™             â”‚ éå»æœ€é«˜   â”‚ ç›´è¿‘7æ—¥é–“  â”‚ ä¹–é›¢ç‡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPA              â”‚ Â¥{bestCPA} â”‚ Â¥{current} â”‚ {rate}%  â”‚
â”‚ ãƒ•ãƒ­ãƒ³ãƒˆCPO       â”‚ Â¥{best}    â”‚ Â¥{current} â”‚ {rate}%  â”‚
â”‚ CTR              â”‚ {best}%    â”‚ {current}% â”‚ {rate}%  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:
{recommendedActions}
```

### 2.3 åºƒå‘Šå˜ä½ã®ä¸Šé™æ—¥äºˆç®—è¨­å®šæ©Ÿèƒ½

#### 2.3.1 è¨­å®šé …ç›®
| é …ç›® | èª¬æ˜ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ |
|------|------|----------|------|
| adId | å¯¾è±¡åºƒå‘Š | UUID | â—‹ |
| maxDailyBudget | ä¸Šé™æ—¥äºˆç®—ï¼ˆå††ï¼‰ | Float | â—‹ |
| enabled | æœ‰åŠ¹/ç„¡åŠ¹ãƒ•ãƒ©ã‚° | Boolean | â—‹ |
| startDate | é©ç”¨é–‹å§‹æ—¥ | DateTime | Ã— |
| endDate | é©ç”¨çµ‚äº†æ—¥ | DateTime | Ã— |

#### 2.3.2 äºˆç®—å¢—é¡æ™‚ã®å‹•ä½œï¼ˆåºƒå‘Šã‚»ãƒƒãƒˆå˜ä½ã§é©ç”¨ï¼‰

**å‰æ**: äºˆç®—ã¯åºƒå‘Šã‚»ãƒƒãƒˆï¼ˆAdGroupï¼‰ã¾ãŸã¯ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³å˜ä½ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. é€šå¸¸ã®äºˆç®—å¢—é¡åˆ¤å®šï¼ˆç¾è¡Œãƒ­ã‚¸ãƒƒã‚¯ï¼‰ã‚’å®Ÿè¡Œ
2. å¯¾è±¡AdGroupå†…ã®å…¨åºƒå‘Šã®ä¸Šé™æ—¥äºˆç®—ã‚’å–å¾—
3. **æœ€å°å€¤ã‚’åºƒå‘Šã‚»ãƒƒãƒˆã®ä¸Šé™ã¨ã—ã¦æ¡ç”¨**
4. å¢—é¡å¾Œã®äºˆç®—ãŒä¸Šé™ã‚’è¶…ãˆã‚‹å ´åˆ:
   - **ä¸Šé™æ—¥äºˆç®—ã«æƒãˆã‚‹**ï¼ˆè¶…éåˆ†ã¯ã‚«ãƒƒãƒˆï¼‰
   - ChangeLogã«ä¸Šé™é©ç”¨ã‚’è¨˜éŒ²
5. ç¾åœ¨ã®äºˆç®—ãŒæ—¢ã«ä¸Šé™ä»¥ä¸Šã®å ´åˆ:
   - äºˆç®—å¢—é¡ã‚’ã‚¹ã‚­ãƒƒãƒ—
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«é€šçŸ¥

**ä¾‹**:
```
AdGroup: äºˆç®— Â¥80,000 â†’ 30%å¢—é¡ã§ Â¥104,000 äºˆå®š
â”œâ”€â”€ Ad A: ä¸Šé™æ—¥äºˆç®— Â¥100,000
â””â”€â”€ Ad B: ä¸Šé™æ—¥äºˆç®— Â¥150,000

é©ç”¨ã•ã‚Œã‚‹ä¸Šé™ = min(Â¥100,000, Â¥150,000) = Â¥100,000
å®Ÿéš›ã®å¢—é¡å¾Œäºˆç®— = Â¥100,000ï¼ˆÂ¥104,000 â†’ Â¥100,000 ã«èª¿æ•´ï¼‰
```

#### 2.3.3 ä¸Šé™æ—¥äºˆç®—é©ç”¨æ™‚ã®é€šçŸ¥
```
ã€ä¸Šé™æ—¥äºˆç®—é©ç”¨ã€‘
åºƒå‘Šã‚»ãƒƒãƒˆID: {adgroupId}
å¯¾è±¡åºƒå‘Š: {adName}ï¼ˆä¸Šé™: Â¥{adMaxBudget}ï¼‰
å…ƒã®å¢—é¡å¾Œäºˆç®—: Â¥{originalNewBudget}
é©ç”¨ã•ã‚ŒãŸä¸Šé™: Â¥{appliedMaxBudget}
é©ç”¨å¾Œäºˆç®—: Â¥{appliedBudget}
ç†ç”±: åºƒå‘Šã‚»ãƒƒãƒˆå†…ã®æœ€å°ä¸Šé™æ—¥äºˆç®—ã‚’è¶…éã™ã‚‹ãŸã‚èª¿æ•´
```

### 2.4 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é€šçŸ¥æ©Ÿèƒ½

#### 2.4.1 é€šçŸ¥ç¨®åˆ¥
| é€šçŸ¥ã‚¿ã‚¤ãƒ— | é‡è¦åº¦ | èª¬æ˜ |
|-----------|--------|------|
| CPA_DEVIATION | WARNING | CPAä¹–é›¢ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆ20%ä»¥ä¸Šä¹–é›¢ï¼‰ |
| CR_REVIEW | INFO | CRå®šæœŸè¦‹ç›´ã—ï¼ˆ10ä¸‡å††æ¶ˆåŒ–ã”ã¨ï¼‰ |
| BUDGET_CAP_APPLIED | INFO | ä¸Šé™æ—¥äºˆç®—é©ç”¨é€šçŸ¥ |
| BUDGET_CAP_REACHED | WARNING | ä¸Šé™æ—¥äºˆç®—åˆ°é”é€šçŸ¥ï¼ˆå¢—é¡ã‚¹ã‚­ãƒƒãƒ—ï¼‰ |
| PERFORMANCE_DEGRADATION | CRITICAL | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ€¥æ¿€æ‚ªåŒ–ï¼ˆ50%ä»¥ä¸Šä¹–é›¢ï¼‰ |

#### 2.4.2 é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨æ“ä½œ
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èª¬æ˜ | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ |
|-----------|------|-------------|
| UNREAD | æœªèª­ | è‡ªå‹•ï¼ˆæ–°è¦ä½œæˆæ™‚ï¼‰ |
| READ | æ—¢èª­ | é€šçŸ¥ã‚’ã‚¯ãƒªãƒƒã‚¯ã§è‡ªå‹•å¤‰æ›´ |
| DELETED | å‰Šé™¤æ¸ˆã¿ | ã€Œå¯¾å¿œæ¸ˆã¿ã€ãƒœã‚¿ãƒ³ã§å‰Šé™¤ |

**é‡è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œå¯¾å¿œæ¸ˆã¿ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€é€šçŸ¥ã¯ãƒªã‚¹ãƒˆã‹ã‚‰**å®Œå…¨ã«å‰Šé™¤**ã•ã‚Œã‚‹ï¼ˆDBã‹ã‚‰ç‰©ç†å‰Šé™¤ï¼‰

#### 2.4.3 é€šçŸ¥è¡¨ç¤ºè¦ä»¶
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ˜ãƒƒãƒ€ãƒ¼ã«æœªèª­é€šçŸ¥æ•°ã®ãƒãƒƒã‚¸è¡¨ç¤º
- é€šçŸ¥ãƒ‘ãƒãƒ«ã§ã®ä¸€è¦§è¡¨ç¤ºï¼ˆæœ€æ–°é †ï¼‰
- **é‡è¦åº¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½**:
  - CRITICAL: å¸¸ã«è¡¨ç¤ºï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä¸å¯ï¼‰
  - WARNING: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã§è¡¨ç¤º/éè¡¨ç¤ºé¸æŠå¯
  - INFO: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã§è¡¨ç¤º/éè¡¨ç¤ºé¸æŠå¯
- ã€Œå¯¾å¿œæ¸ˆã¿ã€ãƒœã‚¿ãƒ³ã«ã‚ˆã‚‹é€šçŸ¥å‰Šé™¤æ©Ÿèƒ½
- é€šçŸ¥ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°è¡¨ç¤º
- ä¸€æ‹¬æ—¢èª­æ©Ÿèƒ½
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ï¼ˆã‚¿ã‚¤ãƒ—åˆ¥ã€é‡è¦åº¦åˆ¥ã€æ—¥ä»˜åˆ¥ï¼‰

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 3.1 æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«

#### 3.1.1 AdPerformanceï¼ˆåºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡ï¼‰
```prisma
model AdPerformance {
  id                    String    @id @default(uuid())
  adId                  String
  advertiserId          String

  // ç´¯è¨ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹
  totalSpend            Float     @default(0)      // ç´¯è¨ˆæ¶ˆåŒ–é¡
  totalImpressions      Int       @default(0)      // ç´¯è¨ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ï¼ˆãƒªãƒ¼ãƒã¨ã—ã¦ä½¿ç”¨ï¼‰
  totalClicks           Int       @default(0)      // ç´¯è¨ˆã‚¯ãƒªãƒƒã‚¯æ•°
  totalConversions      Int       @default(0)      // ç´¯è¨ˆCVæ•°ï¼ˆGoogle SheetsåŸºæº–ï¼‰
  totalFrontSales       Int       @default(0)      // ç´¯è¨ˆãƒ•ãƒ­ãƒ³ãƒˆè²©å£²æ•°

  // éå»æœ€é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³10ä¸‡é”æˆå¾Œã«è¨˜éŒ²é–‹å§‹ï¼‰
  bestCPA               Float?                     // éå»æœ€é«˜CPAï¼ˆä½ã„ã»ã©è‰¯ã„ï¼‰
  bestCPADate           DateTime?                  // éå»æœ€é«˜CPAè¨˜éŒ²æ—¥
  bestFrontCPO          Float?                     // éå»æœ€é«˜ãƒ•ãƒ­ãƒ³ãƒˆCPO
  bestFrontCPODate      DateTime?                  // éå»æœ€é«˜ãƒ•ãƒ­ãƒ³ãƒˆCPOè¨˜éŒ²æ—¥
  bestCTR               Float?                     // éå»æœ€é«˜CTR
  bestCTRDate           DateTime?                  // éå»æœ€é«˜CTRè¨˜éŒ²æ—¥

  // è¦‹ç›´ã—ãƒˆãƒªã‚¬ãƒ¼ç”¨
  spendAtLastReview     Float     @default(0)      // å‰å›è¦‹ç›´ã—æ™‚ç‚¹ã®ç´¯è¨ˆæ¶ˆåŒ–é¡
  lastReviewDate        DateTime?                  // å‰å›è¦‹ç›´ã—æ—¥
  reviewCount           Int       @default(0)      // è¦‹ç›´ã—å›æ•°

  // ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³æ¡ä»¶é”æˆãƒ•ãƒ©ã‚°
  impressionThresholdMet    Boolean   @default(false)  // ç´¯è¨ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³10ä¸‡é”æˆãƒ•ãƒ©ã‚°
  impressionThresholdMetAt  DateTime?                  // é”æˆæ—¥æ™‚

  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  ad                    Ad        @relation(fields: [adId], references: [id], onDelete: Cascade)
  advertiser            Advertiser @relation(fields: [advertiserId], references: [id], onDelete: Cascade)

  @@unique([adId])
  @@index([advertiserId])
  @@index([impressionThresholdMet])
  @@map("ad_performances")
}
```

#### 3.1.2 AdBudgetCapï¼ˆåºƒå‘Šä¸Šé™æ—¥äºˆç®—è¨­å®šï¼‰
```prisma
model AdBudgetCap {
  id                String    @id @default(uuid())
  adId              String
  advertiserId      String
  maxDailyBudget    Float                          // ä¸Šé™æ—¥äºˆç®—ï¼ˆå††ï¼‰
  enabled           Boolean   @default(true)       // æœ‰åŠ¹/ç„¡åŠ¹
  startDate         DateTime?                      // é©ç”¨é–‹å§‹æ—¥
  endDate           DateTime?                      // é©ç”¨çµ‚äº†æ—¥
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  ad                Ad        @relation(fields: [adId], references: [id], onDelete: Cascade)
  advertiser        Advertiser @relation(fields: [advertiserId], references: [id], onDelete: Cascade)

  @@unique([adId])
  @@index([advertiserId])
  @@index([enabled])
  @@map("ad_budget_caps")
}
```

#### 3.1.3 Notificationï¼ˆé€šçŸ¥ï¼‰
```prisma
model Notification {
  id                String    @id @default(uuid())
  type              String                          // é€šçŸ¥ã‚¿ã‚¤ãƒ—
  severity          String    @default("INFO")      // INFO, WARNING, CRITICAL
  advertiserId      String
  entityType        String?                         // AD, ADGROUP, CAMPAIGN
  entityId          String?                         // å¯¾è±¡ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ID
  title             String                          // é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«
  message           String    @db.Text              // é€šçŸ¥æœ¬æ–‡
  metadata          Json?                           // è¿½åŠ ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ•°å€¤ç­‰ï¼‰
  status            String    @default("UNREAD")    // UNREAD, READï¼ˆå¯¾å¿œæ¸ˆã¿ã¯ç‰©ç†å‰Šé™¤ï¼‰
  readAt            DateTime?                       // æ—¢èª­æ—¥æ™‚
  createdAt         DateTime  @default(now())

  advertiser        Advertiser @relation(fields: [advertiserId], references: [id], onDelete: Cascade)

  @@index([advertiserId, status])
  @@index([type])
  @@index([severity])
  @@index([createdAt])
  @@map("notifications")
}
```

### 3.2 æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ‹¡å¼µ

#### 3.2.1 Ad ãƒ¢ãƒ‡ãƒ«ã¸ã®é–¢é€£è¿½åŠ 
```prisma
model Ad {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ...

  // æ–°è¦ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  performance       AdPerformance?
  budgetCap         AdBudgetCap?
}
```

#### 3.2.2 Advertiser ãƒ¢ãƒ‡ãƒ«ã¸ã®é–¢é€£è¿½åŠ 
```prisma
model Advertiser {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ...

  // æ–°è¦ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  adPerformances    AdPerformance[]
  adBudgetCaps      AdBudgetCap[]
  notifications     Notification[]
}
```

---

## 4. APIè¨­è¨ˆ

### 4.1 é€šçŸ¥API

#### 4.1.1 é€šçŸ¥ä¸€è¦§å–å¾—
```
GET /api/notifications
Query Parameters:
  - advertiserId: string (required)
  - status: string[] (optional) - UNREAD, READ
  - type: string[] (optional) - CPA_DEVIATION, AD_REVIEW, etc.
  - severity: string[] (optional) - INFO, WARNING, CRITICAL
  - limit: number (optional, default: 50)
  - offset: number (optional, default: 0)

Response:
{
  notifications: Notification[],
  total: number,
  unreadCount: number
}
```

#### 4.1.2 é€šçŸ¥æ—¢èª­æ›´æ–°
```
PATCH /api/notifications/:id/read
Response:
{
  success: true
}
```

#### 4.1.3 é€šçŸ¥å‰Šé™¤ï¼ˆå¯¾å¿œæ¸ˆã¿ï¼‰
```
DELETE /api/notifications/:id
Response:
{
  success: true
}
```
**æ³¨æ„**: å¯¾å¿œæ¸ˆã¿ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ç‰©ç†å‰Šé™¤ã•ã‚Œã‚‹

#### 4.1.4 ä¸€æ‹¬æ—¢èª­
```
POST /api/notifications/mark-read
Body:
{
  advertiserId: string,
  notificationIds?: string[] // æŒ‡å®šãªã—ã®å ´åˆã¯å…¨ä»¶æ—¢èª­
}
```

### 4.2 åºƒå‘Šä¸Šé™æ—¥äºˆç®—API

#### 4.2.1 ä¸Šé™æ—¥äºˆç®—è¨­å®š
```
POST /api/ad-budget-caps
Body:
{
  adId: string,
  advertiserId: string,
  maxDailyBudget: number,
  enabled: boolean,
  startDate?: string,
  endDate?: string
}
```

#### 4.2.2 ä¸Šé™æ—¥äºˆç®—æ›´æ–°
```
PATCH /api/ad-budget-caps/:id
Body:
{
  maxDailyBudget?: number,
  enabled?: boolean,
  startDate?: string,
  endDate?: string
}
```

#### 4.2.3 ä¸Šé™æ—¥äºˆç®—ä¸€è¦§å–å¾—
```
GET /api/ad-budget-caps
Query Parameters:
  - advertiserId: string (required)
  - enabled: boolean (optional)
```

### 4.3 åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹API

#### 4.3.1 åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸€è¦§å–å¾—
```
GET /api/ad-performances
Query Parameters:
  - advertiserId: string (required)
  - impressionThresholdMet: boolean (optional)
  - hasDeviation: boolean (optional) - CPAä¹–é›¢ãŒã‚ã‚‹åºƒå‘Šã®ã¿

Response:
{
  performances: AdPerformance[],
  summary: {
    totalAds: number,
    adsWithDeviation: number,
    adsNeedingReview: number
  }
}
```

#### 4.3.2 åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©³ç´°å–å¾—
```
GET /api/ad-performances/:adId
Response:
{
  performance: AdPerformance,
  currentMetrics: {
    cpa: number,
    frontCPO: number,
    ctr: number,
    // ... ç›´è¿‘7æ—¥é–“ã®æŒ‡æ¨™
  },
  deviationStatus: {
    cpaDeviation: number | null,
    frontCPODeviation: number | null,
    ctrDeviation: number | null
  },
  reviewStatus: {
    needsReview: boolean,
    spendSinceLastReview: number,
    daysSinceLastReview: number
  }
}
```

---

## 5. å‡¦ç†ãƒ•ãƒ­ãƒ¼

### 5.1 æ—¥æ¬¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹åŒæœŸæ™‚ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—¥æ¬¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹åŒæœŸï¼ˆ00:05 JSTï¼‰                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. TikTok APIã‹ã‚‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—                              â”‚
â”‚    - Campaign/AdGroup/Ad ãƒ¬ãƒ™ãƒ«ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ›´æ–°                                    â”‚
â”‚    FOR EACH Ad:                                             â”‚
â”‚      a. AdPerformance ã®ç´¯è¨ˆå€¤ã‚’æ›´æ–°                         â”‚
â”‚         - totalSpend += daily spend                         â”‚
â”‚         - totalImpressions += daily impressions             â”‚
â”‚         IF totalImpressions >= 100,000 AND !thresholdMet:   â”‚
â”‚           - impressionThresholdMet = true                   â”‚
â”‚           - impressionThresholdMetAt = now()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. éå»æœ€é«˜CPAæ›´æ–°ãƒã‚§ãƒƒã‚¯ï¼ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³10ä¸‡é”æˆæ¸ˆã¿ã®ã¿ï¼‰ â”‚
â”‚    IF impressionThresholdMet:                               â”‚
â”‚      a. Google Sheetsã‹ã‚‰CVæ•°ã‚’å–å¾—ã—ã¦CPAã‚’è¨ˆç®—             â”‚
â”‚      b. IF currentCPA < bestCPA OR bestCPA is null:         â”‚
â”‚           - bestCPA = currentCPA                            â”‚
â”‚           - bestCPADate = now()                             â”‚
â”‚      c. åŒæ§˜ã«ãƒ•ãƒ­ãƒ³ãƒˆCPO, CTRã‚‚æ›´æ–°                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. CPAä¹–é›¢ãƒã‚§ãƒƒã‚¯ï¼ˆã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³10ä¸‡é”æˆæ¸ˆã¿ã®ã¿ï¼‰        â”‚
â”‚    IF impressionThresholdMet AND bestCPA is not null:       â”‚
â”‚      a. ä¹–é›¢ç‡ = (currentCPA - bestCPA) / bestCPA * 100     â”‚
â”‚      b. IF ä¹–é›¢ç‡ >= 20%:                                   â”‚
â”‚           - Notificationä½œæˆï¼ˆCPA_DEVIATIONï¼‰               â”‚
â”‚      c. IF ä¹–é›¢ç‡ >= 50%:                                   â”‚
â”‚           - Notificationä½œæˆï¼ˆPERFORMANCE_DEGRADATIONï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. æ¶ˆåŒ–é¡ãƒˆãƒªã‚¬ãƒ¼ãƒã‚§ãƒƒã‚¯                                    â”‚
â”‚    FOR EACH AdPerformance:                                  â”‚
â”‚      a. spendSinceLastReview = totalSpend - spendAtLastReviewâ”‚
â”‚      b. IF spendSinceLastReview >= 100,000:                 â”‚
â”‚           - Notificationä½œæˆï¼ˆAD_REVIEWï¼‰                   â”‚
â”‚           - spendAtLastReview = totalSpend                  â”‚
â”‚           - lastReviewDate = now()                          â”‚
â”‚           - reviewCount++                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 äºˆç®—å¢—é¡æ™‚ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äºˆç®—å¢—é¡åˆ¤å®šï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰                                  â”‚
â”‚ â†’ INCREASE_BUDGET æ±ºå®š                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å¯¾è±¡åºƒå‘Šã‚»ãƒƒãƒˆå†…ã®å…¨åºƒå‘Šã®ä¸Šé™æ—¥äºˆç®—ã‚’å–å¾—                 â”‚
â”‚    SELECT * FROM ad_budget_caps                             â”‚
â”‚    WHERE adId IN (åºƒå‘Šã‚»ãƒƒãƒˆå†…ã®å…¨åºƒå‘ŠID)                    â”‚
â”‚      AND enabled = true                                     â”‚
â”‚      AND (startDate IS NULL OR startDate <= today)          â”‚
â”‚      AND (endDate IS NULL OR endDate >= today)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. åºƒå‘Šã‚»ãƒƒãƒˆã®ä¸Šé™ã‚’æ±ºå®š                                    â”‚
â”‚    effectiveMaxBudget = MIN(å…¨åºƒå‘Šã®ä¸Šé™æ—¥äºˆç®—)              â”‚
â”‚    â€»ä¸Šé™è¨­å®šãŒãªã„åºƒå‘Šã¯ç„¡è¦–                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ä¸Šé™è¨­å®šã‚ã‚Šï¼Ÿ      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                             â”‚
              YES                           NO
               â”‚                             â”‚
               â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3a. ä¸Šé™ãƒã‚§ãƒƒã‚¯          â”‚   â”‚ 3b. é€šå¸¸ã®äºˆç®—å¢—é¡        â”‚
â”‚     newBudget =           â”‚   â”‚     ï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰      â”‚
â”‚       currentBudget * 1.3 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                          â”‚
â”‚     IF newBudget >       â”‚
â”‚       effectiveMaxBudget:â”‚
â”‚       newBudget =        â”‚
â”‚        effectiveMaxBudgetâ”‚
â”‚       Notificationä½œæˆ   â”‚
â”‚       (BUDGET_CAP_APPLIED)â”‚
â”‚                          â”‚
â”‚     IF currentBudget >=  â”‚
â”‚       effectiveMaxBudget:â”‚
â”‚       äºˆç®—å¢—é¡ã‚¹ã‚­ãƒƒãƒ—    â”‚
â”‚       Notificationä½œæˆ   â”‚
â”‚       (BUDGET_CAP_REACHED)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. TikTok API ã§äºˆç®—æ›´æ–°å®Ÿè¡Œ                                 â”‚
â”‚    - ChangeLog ã«è¨˜éŒ²                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ç”»é¢è¨­è¨ˆ

### 6.1 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - é€šçŸ¥ãƒ‘ãƒãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” é€šçŸ¥ (3ä»¶ã®æœªèª­)                              [ã™ã¹ã¦æ—¢èª­] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ WARNING  2024/01/15 09:30                               â”‚
â”‚ CPAä¹–é›¢ã‚¢ãƒ©ãƒ¼ãƒˆ                                             â”‚
â”‚ åºƒå‘Šã€Œæ—ç¤¾é•·_å•é¡Œãªã„ã§ã™ã€ã®CPAãŒéå»æœ€é«˜ã‹ã‚‰25%ä¹–é›¢        â”‚
â”‚ éå»æœ€é«˜: Â¥2,500 â†’ ç¾åœ¨: Â¥3,125                            â”‚
â”‚ [è©³ç´°ã‚’è¦‹ã‚‹] [å¯¾å¿œæ¸ˆã¿]                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â„¹ï¸ INFO  2024/01/15 00:05                                  â”‚
â”‚ åºƒå‘Šå®šæœŸè¦‹ç›´ã—                                              â”‚
â”‚ åºƒå‘Šã€ŒAI1_æ–°æ˜¥ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã€ãŒæ¶ˆåŒ–é¡10ä¸‡å††ã«åˆ°é”             â”‚
â”‚ ç´¯è¨ˆæ¶ˆåŒ–é¡: Â¥300,000                                        â”‚
â”‚ [è©³ç´°ã‚’è¦‹ã‚‹] [å¯¾å¿œæ¸ˆã¿]                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â„¹ï¸ INFO  2024/01/14 18:00                                  â”‚
â”‚ ä¸Šé™æ—¥äºˆç®—é©ç”¨                                              â”‚
â”‚ åºƒå‘Šã€ŒSNS1_ãƒã‚ºå‹•ç”»ã€ã®äºˆç®—å¢—é¡ã‚’ä¸Šé™æ—¥äºˆç®—ã«èª¿æ•´            â”‚
â”‚ å…ƒã®äºˆç®—: Â¥78,000 â†’ é©ç”¨å¾Œ: Â¥60,000                        â”‚
â”‚ [è©³ç´°ã‚’è¦‹ã‚‹] [å¯¾å¿œæ¸ˆã¿]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 åºƒå‘Šç®¡ç†ç”»é¢ - ä¸Šé™æ—¥äºˆç®—è¨­å®š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åºƒå‘Šç®¡ç† > æ—ç¤¾é•·_å•é¡Œãªã„ã§ã™                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¦‚è¦                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ ç´¯è¨ˆæ¶ˆåŒ–é¡    â”‚ ç´¯è¨ˆã‚¤ãƒ³ãƒ—ãƒ¬    â”‚ éå»æœ€é«˜CPA   â”‚          â”‚
â”‚ â”‚ Â¥2,450,000   â”‚ 1,250,000      â”‚ Â¥2,100      â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚ ğŸ’° äºˆç®—è¨­å®š                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â˜‘ ä¸Šé™æ—¥äºˆç®—ã‚’è¨­å®šã™ã‚‹                                   â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ ä¸Šé™æ—¥äºˆç®—: [Â¥60,000        ] å††                        â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ é©ç”¨æœŸé–“:                                               â”‚â”‚
â”‚ â”‚ é–‹å§‹æ—¥: [2024/01/15] ï½ çµ‚äº†æ—¥: [æŒ‡å®šãªã—]              â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚ â€»äºˆç®—å¢—é¡æ™‚ã€åºƒå‘Šã‚»ãƒƒãƒˆå†…ã§æœ€ã‚‚ä½ã„ä¸Šé™æ—¥äºˆç®—ãŒé©ç”¨ã•ã‚Œã¾ã™â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚                                    [ã‚­ãƒ£ãƒ³ã‚»ãƒ«] [ä¿å­˜]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸€è¦§ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸€è¦§                                   [ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼] [CSVå‡ºåŠ›] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¡¨ç¤º: [å…¨åºƒå‘Š â–¼]  é‡è¦åº¦: [å…¨ã¦ â–¼]  ä¸¦ã³é †: [ä¹–é›¢ç‡ï¼ˆå¤§â†’å°ï¼‰ â–¼]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åºƒå‘Šå           â”‚ ç´¯è¨ˆæ¶ˆåŒ–  â”‚ éå»æœ€é«˜  â”‚ ç¾åœ¨CPA  â”‚ ä¹–é›¢ç‡   â”‚ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹    â”‚
â”‚                  â”‚          â”‚ CPA      â”‚          â”‚          â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”´ æ—ç¤¾é•·_å•é¡Œ   â”‚ Â¥2.45M   â”‚ Â¥2,100   â”‚ Â¥3,125   â”‚ +48.8%   â”‚ è¦è¦‹ç›´ã—      â”‚
â”‚    ãªã„ã§ã™       â”‚          â”‚          â”‚          â”‚          â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¡ AI1_æ–°æ˜¥      â”‚ Â¥300K    â”‚ Â¥3,500   â”‚ Â¥4,200   â”‚ +20.0%   â”‚ æ³¨æ„         â”‚
â”‚    ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³   â”‚          â”‚          â”‚          â”‚          â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¢ SNS1_ãƒã‚ºå‹•ç”» â”‚ Â¥1.8M    â”‚ Â¥1,800   â”‚ Â¥1,950   â”‚ +8.3%    â”‚ è‰¯å¥½         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âšª AI3_ãƒ†ã‚¹ãƒˆ    â”‚ Â¥50K     â”‚ -        â”‚ Â¥5,000   â”‚ -        â”‚ ãƒ‡ãƒ¼ã‚¿åé›†ä¸­  â”‚
â”‚   ï¼ˆã‚¤ãƒ³ãƒ—ãƒ¬10ä¸‡æœªé”ï¼‰                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. éæ©Ÿèƒ½è¦ä»¶

### 7.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- é€šçŸ¥ä¸€è¦§å–å¾—: 200msä»¥å†…
- åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é›†è¨ˆ: 500msä»¥å†…ï¼ˆ100åºƒå‘Šä»¥ä¸‹ã®å ´åˆï¼‰
- æ—¥æ¬¡ãƒãƒƒãƒå‡¦ç†: 30åˆ†ä»¥å†…ï¼ˆå…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰

### 7.2 ãƒ‡ãƒ¼ã‚¿ä¿æŒ
- é€šçŸ¥: å¯¾å¿œæ¸ˆã¿ã§ç‰©ç†å‰Šé™¤ã€æœªå¯¾å¿œã¯ç„¡æœŸé™ä¿æŒ
- AdPerformance: æ°¸ç¶šä¿æŒ
- ChangeLog: 1å¹´é–“ä¿æŒ

### 7.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- é€šçŸ¥ãƒ»è¨­å®šã®é–²è¦§/å¤‰æ›´ã¯è©²å½“Advertiserã®æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿
- APIèªè¨¼: æ—¢å­˜ã®JWTèªè¨¼ã‚’ä½¿ç”¨

---

## 8. ç§»è¡Œè¨ˆç”»

### 8.1 Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æº–å‚™
1. æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆPrisma migrationï¼‰
   - AdPerformance
   - AdBudgetCap
   - Notification
2. **åˆæœŸãƒ‡ãƒ¼ã‚¿ã¯ç©ºã§é–‹å§‹**ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®ç§»è¡Œãªã—ï¼‰

### 8.2 Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…
1. AdPerformanceService å®Ÿè£…
2. NotificationService å®Ÿè£…
3. äºˆç®—å¢—é¡ãƒ­ã‚¸ãƒƒã‚¯ã«ä¸Šé™æ—¥äºˆç®—ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
4. æ—¥æ¬¡ãƒãƒƒãƒå‡¦ç†ã®æ‹¡å¼µ

### 8.3 Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
1. é€šçŸ¥ãƒ‘ãƒãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆé‡è¦åº¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»˜ãï¼‰
2. åºƒå‘Šç®¡ç†ç”»é¢ï¼ˆä¸Šé™æ—¥äºˆç®—è¨­å®šï¼‰
3. åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸€è¦§ç”»é¢

### 8.4 Phase 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒªãƒ¼ã‚¹
1. å˜ä½“ãƒ†ã‚¹ãƒˆ
2. çµåˆãƒ†ã‚¹ãƒˆ
3. UATï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å—ã‘å…¥ã‚Œãƒ†ã‚¹ãƒˆï¼‰
4. æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹

---

## 9. å°†æ¥ã®æ‹¡å¼µæ¡ˆ

### 9.1 æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- ä¹–é›¢æ¤œå‡ºæ™‚ã«å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹å¤‰æ›´ã€é…ä¿¡é¢å¤‰æ›´ï¼‰ã‚’è‡ªå‹•ææ¡ˆ
- ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

### 9.2 CRå˜ä½KPIè¨­å®š
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå˜ä½ã ã‘ã§ãªãã€CRå˜ä½ã§ç›®æ¨™CPA/ãƒ•ãƒ­ãƒ³ãƒˆCPOã‚’è¨­å®š
- CRå˜ä½ã®æœ€é©åŒ–åˆ¤å®š

### 9.3 é€šçŸ¥ãƒãƒ£ãƒãƒ«æ‹¡å¼µ
- Slacké€£æº
- ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
- LINEé€šçŸ¥

### 9.4 æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆæ¸¬
- CPAãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬
- æœ€é©ãªäºˆç®—é…åˆ†ã®ææ¡ˆ

---

## 10. æ—¢å­˜æ©Ÿèƒ½ã¨ã®çµ±åˆåˆ†æ

### 10.1 çµ±åˆãƒã‚¤ãƒ³ãƒˆã¨å½±éŸ¿ç¯„å›²

æ–°æ©Ÿèƒ½ã¯æ—¢å­˜ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ã«**è¿½åŠ **ã™ã‚‹å½¢ã§å®Ÿè£…ã—ã€æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã¯**ä¸€åˆ‡å¤‰æ›´ã—ãªã„**è¨­è¨ˆã¨ã™ã‚‹ã€‚

#### 10.1.1 æ—¥æ¬¡ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åŒæœŸï¼ˆscheduler.service.ts - 00:00 JSTï¼‰

```
ã€æ—¢å­˜å‡¦ç†ã€‘å¤‰æ›´ãªã—
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. OAuthTokenå–å¾—                                           â”‚
â”‚ 2. Campaign/AdGroup/AdåŒæœŸï¼ˆupsertï¼‰                        â”‚
â”‚ 3. Creativeä½œæˆï¼ˆvideoId/imageIdã‹ã‚‰ï¼‰                      â”‚
â”‚ 4. Smart+åºƒå‘Šã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯åŒæœŸ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ã€è¿½åŠ å‡¦ç†ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. CreativePerformanceåˆæœŸåŒ–ï¼ˆæ–°è¦CRã®ã¿ï¼‰                   â”‚
â”‚    - æ—¢å­˜CRã§ CreativePerformance ãŒãªã„ã‚‚ã®ã‚’ä½œæˆ           â”‚
â”‚    - åˆæœŸå€¤: totalSpend=0, totalReach=0, etc.               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Ÿè£…æ–¹æ³•**: `scheduleDailyEntitySync` ã®æœ€å¾Œã«ãƒ•ãƒƒã‚¯å‡¦ç†ã‚’è¿½åŠ 

```typescript
// æ—¢å­˜å‡¦ç†ã®æœ€å¾Œï¼ˆline 425ä»˜è¿‘ã®å¾Œï¼‰
// ===== æ–°æ©Ÿèƒ½: CreativePerformance åˆæœŸåŒ– =====
await this.creativePerformanceService.initializeNewCreatives(advertiser.id);
```

#### 10.1.2 æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆå–å¾—ï¼ˆscheduler.service.ts - 00:05 JSTï¼‰

```
ã€æ—¢å­˜å‡¦ç†ã€‘å¤‰æ›´ãªã—
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. AUCTION_CAMPAIGN/ADGROUP/AD ãƒ¬ãƒãƒ¼ãƒˆå–å¾—                 â”‚
â”‚ 2. saveReportMetrics() ã§DBã«ä¿å­˜                           â”‚
â”‚ 3. Smart+ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—                                      â”‚
â”‚ 4. saveSmartPlusMetrics() ã§DBã«ä¿å­˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ã€è¿½åŠ å‡¦ç†ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. CreativePerformance ç´¯è¨ˆæ›´æ–°                              â”‚
â”‚    - Metric â†’ Ad â†’ Creative ã®é–¢é€£ã§é›†è¨ˆ                    â”‚
â”‚    - totalSpend, totalReach ç­‰ã®ç´¯è¨ˆå€¤ã‚’æ›´æ–°                 â”‚
â”‚                                                             â”‚
â”‚ 6. ãƒªãƒ¼ãƒé–¾å€¤ãƒã‚§ãƒƒã‚¯ï¼ˆ10ä¸‡é”æˆåˆ¤å®šï¼‰                         â”‚
â”‚                                                             â”‚
â”‚ 7. éå»æœ€é«˜CPAæ›´æ–°ï¼ˆãƒªãƒ¼ãƒ10ä¸‡é”æˆæ¸ˆã¿CRã®ã¿ï¼‰                â”‚
â”‚                                                             â”‚
â”‚ 8. CPAä¹–é›¢ãƒã‚§ãƒƒã‚¯ â†’ Notificationä½œæˆ                        â”‚
â”‚                                                             â”‚
â”‚ 9. æ¶ˆåŒ–é¡ãƒˆãƒªã‚¬ãƒ¼ãƒã‚§ãƒƒã‚¯ â†’ Notificationä½œæˆ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Ÿè£…æ–¹æ³•**: `scheduleDailyReportFetch` ã®æœ€å¾Œã«ãƒ•ãƒƒã‚¯å‡¦ç†ã‚’è¿½åŠ 

```typescript
// æ—¢å­˜å‡¦ç†ã®æœ€å¾Œï¼ˆline 580ä»˜è¿‘ã®å¾Œï¼‰
// ===== æ–°æ©Ÿèƒ½: CRãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ =====
await this.creativePerformanceService.updateAllCreativePerformances();
await this.creativePerformanceService.checkDeviationsAndTriggers();
```

#### 10.1.3 äºˆç®—æœ€é©åŒ–ï¼ˆoptimization.service.tsï¼‰

```
ã€æ—¢å­˜å‡¦ç†ã€‘å¤‰æ›´ãªã—
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Phase 1: åºƒå‘Šãƒ¬ãƒ™ãƒ«æœ€é©åŒ–                                 â”‚
â”‚    - getActiveAds()                                         â”‚
â”‚    - evaluateAdPerformance()                                â”‚
â”‚    - makeOptimizationDecision()                             â”‚
â”‚    - executeAdGroupOptimization()                           â”‚
â”‚                                                             â”‚
â”‚ 2. Phase 2: ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ¬ãƒ™ãƒ«æœ€é©åŒ–ï¼ˆæ—§ã‚¹ãƒãƒ—ãƒ©ï¼‰            â”‚
â”‚    - evaluateCampaignPerformance()                          â”‚
â”‚    - makeCampaignOptimizationDecision()                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ ã€å¢—é¡æ™‚ã®è¿½åŠ ãƒã‚§ãƒƒã‚¯ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ increaseBudget() / increaseSmartPlusBudget() ã®ä¸­ã§:        â”‚
â”‚                                                             â”‚
â”‚ 1. å¯¾è±¡AdGroupã®åºƒå‘Šã‹ã‚‰Creativeã‚’ç‰¹å®š                       â”‚
â”‚ 2. CreativeBudgetCap ã‚’ãƒã‚§ãƒƒã‚¯                              â”‚
â”‚ 3. ä¸Šé™è¨­å®šãŒã‚ã‚‹å ´åˆ:                                       â”‚
â”‚    - newBudget > maxDailyBudget â†’ ä¸Šé™ã«èª¿æ•´                â”‚
â”‚    - currentBudget >= maxDailyBudget â†’ å¢—é¡ã‚¹ã‚­ãƒƒãƒ—          â”‚
â”‚    - Notification ä½œæˆ                                      â”‚
â”‚ 4. ä¸Šé™è¨­å®šãŒãªã„å ´åˆ:                                       â”‚
â”‚    - æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ãã®ã¾ã¾å®Ÿè¡Œ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Ÿè£…æ–¹æ³•**: `increaseBudget` / `increaseSmartPlusBudget` ã«ä¸Šé™ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 

```typescript
// increaseBudget() å†…ï¼ˆline 843ä»˜è¿‘ï¼‰
private async increaseBudget(...) {
  // ===== æ–°æ©Ÿèƒ½: ä¸Šé™æ—¥äºˆç®—ãƒã‚§ãƒƒã‚¯ =====
  const budgetCap = await this.checkBudgetCap(adgroupId, advertiserId);
  if (budgetCap) {
    const adjustedBudget = await this.applyBudgetCap(
      newBudget,
      budgetCap.maxDailyBudget,
      currentBudget
    );
    if (adjustedBudget === null) {
      // å¢—é¡ã‚¹ã‚­ãƒƒãƒ—
      await this.createNotification('BUDGET_CAP_REACHED', ...);
      return { success: true, action: 'SKIPPED_DUE_TO_CAP' };
    }
    newBudget = adjustedBudget;
    if (adjustedBudget < newBudget) {
      await this.createNotification('BUDGET_CAP_APPLIED', ...);
    }
  }

  // ä»¥ä¸‹ã€æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå¤‰æ›´ãªã—ï¼‰
  if (adgroup.budget_mode && adgroup.budget) {
    // ...
  }
}
```

### 10.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®æ•´åˆæ€§

#### 10.2.1 Creative â†’ Ad ã®é–¢é€£

```
ç¾çŠ¶ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Creative  â”‚â—„â”€â”€â”€â”€â”‚     Ad      â”‚â”€â”€â”€â”€â–ºâ”‚   Metric    â”‚
â”‚             â”‚  1:Nâ”‚             â”‚ 1:N â”‚             â”‚
â”‚ - id        â”‚     â”‚ - creativeIdâ”‚     â”‚ - adId      â”‚
â”‚ - name      â”‚     â”‚ - name      â”‚     â”‚ - spend     â”‚
â”‚ - type      â”‚     â”‚ - status    â”‚     â”‚ - reach     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–°æ©Ÿèƒ½ã§è¿½åŠ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CreativePerformance  â”‚     â”‚   CreativeBudgetCap   â”‚
â”‚                       â”‚     â”‚                       â”‚
â”‚ - creativeId (unique) â”‚     â”‚ - creativeId (unique) â”‚
â”‚ - totalSpend          â”‚     â”‚ - maxDailyBudget      â”‚
â”‚ - totalReach          â”‚     â”‚ - enabled             â”‚
â”‚ - bestCPA             â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - reachThresholdMet   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 10.2.2 ãƒ¡ãƒˆãƒªã‚¯ã‚¹é›†è¨ˆã®æ•´åˆæ€§

```
ã€é‡è¦ã€‘æ—¢å­˜ã® Metric ãƒ†ãƒ¼ãƒ–ãƒ«ã¯å¤‰æ›´ã—ãªã„

CRãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é›†è¨ˆã¯ä»¥ä¸‹ã®ã‚¯ã‚¨ãƒªã§å®Ÿç¾:

SELECT
  c.id as creativeId,
  SUM(m.spend) as totalSpend,
  SUM(m.impressions) as totalReach,  -- reach â‰ˆ impressions ã¨ã—ã¦æ‰±ã†
  SUM(m.conversions) as totalConversions
FROM Creative c
JOIN Ad a ON a.creativeId = c.id
JOIN Metric m ON m.adId = a.id
WHERE m.entityType = 'AD'
GROUP BY c.id
```

### 10.3 ãƒªã‚¹ã‚¯åˆ†æã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| æ—¢å­˜ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä¿å­˜å‡¦ç†ã¸ã®å¹²æ¸‰ | é«˜ | æ–°æ©Ÿèƒ½ã¯æ—¢å­˜å‡¦ç†ã®**å¾Œ**ã«ç‹¬ç«‹å®Ÿè¡Œ |
| äºˆç®—å¢—é¡ãƒ­ã‚¸ãƒƒã‚¯ã®å¤‰æ›´ã«ã‚ˆã‚‹ä¸å…·åˆ | é«˜ | ä¸Šé™ãƒã‚§ãƒƒã‚¯ã¯æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã®**å‰**ã«æ¡ä»¶åˆ†å²ã§è¿½åŠ  |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ï¼ˆæ—¥æ¬¡é›†è¨ˆã®è¿½åŠ ï¼‰ | ä¸­ | ãƒãƒƒãƒå‡¦ç†ã§å®Ÿè¡Œã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ– |
| AdPerformance ã®ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ | ä¸­ | åˆæœŸåŒ–å‡¦ç†ã§å…¨åºƒå‘Šã‚’ã‚«ãƒãƒ¼ |
| Notification ã®å¤§é‡ç”Ÿæˆ | ä½ | 1åºƒå‘Š/æ—¥/ã‚¿ã‚¤ãƒ—ã§é‡è¤‡æŠ‘åˆ¶ |

### 10.4 æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ãªã—ã‚’ä¿è¨¼ã™ã‚‹è¨­è¨ˆåŸå‰‡

1. **è¿½åŠ ã®ã¿ã€å¤‰æ›´ãªã—**: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ã¯æœ€å°é™ï¼ˆãƒ•ãƒƒã‚¯å‘¼ã³å‡ºã—ã®è¿½åŠ ã®ã¿ï¼‰
2. **ç‹¬ç«‹ã—ãŸã‚µãƒ¼ãƒ“ã‚¹**: `AdPerformanceService`, `NotificationService` ã‚’æ–°è¦ä½œæˆ
3. **ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•**: æ–°æ©Ÿèƒ½ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã‚‚æ—¢å­˜å‡¦ç†ã¯å®Œäº†ã™ã‚‹ï¼ˆtry-catchï¼‰
4. **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢**: æ–°æ©Ÿèƒ½ã®DBæ“ä½œã¯æ—¢å­˜å‡¦ç†ã¨åˆ¥ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
5. **æ®µéšçš„æœ‰åŠ¹åŒ–**: Feature Flag ã§æ©Ÿèƒ½ON/OFFå¯èƒ½ã«

```typescript
// ä¾‹: scheduler.service.ts ã§ã®å®‰å…¨ãªè¿½åŠ 
async scheduleDailyReportFetch() {
  // ... æ—¢å­˜å‡¦ç†ï¼ˆå¤‰æ›´ãªã—ï¼‰...

  // ===== æ–°æ©Ÿèƒ½: åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ =====
  if (this.configService.get('FEATURE_AD_PERFORMANCE_ENABLED') === 'true') {
    try {
      await this.adPerformanceService.updateAllAdPerformances();
      await this.adPerformanceService.checkDeviationsAndTriggers();
    } catch (error) {
      // æ–°æ©Ÿèƒ½ã®ã‚¨ãƒ©ãƒ¼ã¯æ—¢å­˜å‡¦ç†ã«å½±éŸ¿ã•ã›ãªã„
      this.logger.error('Ad Performance analysis failed:', error.message);
    }
  }
}
```

### 10.5 çµ±åˆãƒ†ã‚¹ãƒˆè¨ˆç”»

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | ç¢ºèªå†…å®¹ |
|-------------|----------|
| æ—¢å­˜å‡¦ç†ã®å‹•ä½œç¢ºèª | æ–°æ©Ÿèƒ½è¿½åŠ å¾Œã‚‚åŒæœŸãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä¿å­˜ãŒæ­£å¸¸å‹•ä½œ |
| æ–°æ©Ÿèƒ½ç„¡åŠ¹æ™‚ã®å‹•ä½œ | Feature Flag OFF ã§æ–°æ©Ÿèƒ½ãŒå®Ÿè¡Œã•ã‚Œãªã„ |
| äºˆç®—å¢—é¡ã®æ—¢å­˜å‹•ä½œ | ä¸Šé™è¨­å®šãªã—ã®å ´åˆã€å¾“æ¥é€šã‚Š30%å¢—é¡ |
| äºˆç®—å¢—é¡ã®ä¸Šé™é©ç”¨ | ä¸Šé™è¨­å®šã‚ã‚Šã®å ´åˆã€é©åˆ‡ã«èª¿æ•´ãƒ»é€šçŸ¥ |
| CPAä¹–é›¢é€šçŸ¥ | 20%ä¹–é›¢ã§é€šçŸ¥ã€20%æœªæº€ã§é€šçŸ¥ãªã— |
| æ¶ˆåŒ–é¡ãƒˆãƒªã‚¬ãƒ¼ | 10ä¸‡å††ã”ã¨ã«é€šçŸ¥ï¼ˆé‡è¤‡ãªã—ï¼‰ |

---

## 11. ç”¨èªé›†

| ç”¨èª | èª¬æ˜ |
|------|------|
| Adï¼ˆåºƒå‘Šï¼‰ | TikTokä¸Šã§é…ä¿¡ã•ã‚Œã‚‹å€‹åˆ¥ã®åºƒå‘Šã€‚åºƒå‘Šåãƒ»é…ä¿¡è¨­å®šãƒ»ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã®çµ„ã¿åˆã‚ã› |
| AdGroupï¼ˆåºƒå‘Šã‚»ãƒƒãƒˆï¼‰ | è¤‡æ•°ã®åºƒå‘Šã‚’ã¾ã¨ã‚ãŸã‚°ãƒ«ãƒ¼ãƒ—ã€‚äºˆç®—ãƒ»ã‚¿ãƒ¼ã‚²ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®š |
| Campaignï¼ˆã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ï¼‰ | è¤‡æ•°ã®åºƒå‘Šã‚»ãƒƒãƒˆã‚’ã¾ã¨ã‚ãŸå˜ä½ã€‚ç›®æ¨™ã‚’è¨­å®š |
| Creativeï¼ˆã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–/CRï¼‰ | åºƒå‘Šã«ä½¿ç”¨ã™ã‚‹å‹•ç”»/ç”»åƒç´ æ |
| CPA | Cost Per Acquisitionï¼ˆç²å¾—å˜ä¾¡ï¼‰ã€‚æ¶ˆåŒ–é¡ Ã· CVæ•° |
| CPO | Cost Per Orderï¼ˆæ³¨æ–‡å˜ä¾¡ï¼‰ |
| ãƒ•ãƒ­ãƒ³ãƒˆCPO | ãƒ•ãƒ­ãƒ³ãƒˆå•†å“ã®æ³¨æ–‡å˜ä¾¡ |
| ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ | åºƒå‘ŠãŒè¡¨ç¤ºã•ã‚ŒãŸå›æ•°ï¼ˆæœ¬ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ãƒªãƒ¼ãƒã®ä»£ã‚ã‚Šã«ä½¿ç”¨ï¼‰ |
| ä¹–é›¢ç‡ | (ç¾åœ¨å€¤ - éå»æœ€é«˜å€¤) / éå»æœ€é«˜å€¤ Ã— 100 |
| ä¸Šé™æ—¥äºˆç®— | åºƒå‘Šå˜ä½ã§è¨­å®šã™ã‚‹æ—¥æ¬¡ã®æœ€å¤§äºˆç®—é¡ã€‚åºƒå‘Šã‚»ãƒƒãƒˆå†…ã§æœ€å°å€¤ãŒé©ç”¨ã•ã‚Œã‚‹ |
| é…ä¿¡é¢ | åºƒå‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´æ‰€ï¼ˆTikTok For You, Pangleç­‰ï¼‰ |
| Google Sheets CVæ•° | Google Sheetsã§ç®¡ç†ã—ã¦ã„ã‚‹å®Ÿéš›ã®ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ•°ï¼ˆCPAè¨ˆç®—ã«ä½¿ç”¨ï¼‰ |
