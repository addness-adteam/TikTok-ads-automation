# ============================================================================
# TikTok広告運用自動化システム - 環境変数テンプレート
# ============================================================================
# このファイルを .env にコピーして使用してください
# ============================================================================

# ----------------------------------------------------------------------------
# アプリケーション設定
# ----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=TikTok-Ads-Automation
APP_URL=http://localhost:3000
API_URL=http://localhost:3001

# ----------------------------------------------------------------------------
# TikTok API 設定
# ----------------------------------------------------------------------------
# TikTok Developer Portal (https://developers.tiktok.com/) で取得
TIKTOK_APP_ID=your_app_id_here
TIKTOK_APP_SECRET=your_app_secret_here

# Sandbox or Production
TIKTOK_API_ENV=sandbox
# Sandbox: https://sandbox-ads.tiktok.com/open_api
# Production: https://business-api.tiktok.com/open_api
TIKTOK_API_BASE_URL=https://sandbox-ads.tiktok.com/open_api

# OAuth Redirect URI
TIKTOK_OAUTH_REDIRECT_URI=http://localhost:3001/auth/tiktok/callback

# Webhook Secret
TIKTOK_WEBHOOK_SECRET=your_webhook_secret_here

# ----------------------------------------------------------------------------
# データベース設定
# ----------------------------------------------------------------------------
# PostgreSQL
DATABASE_URL=postgresql://tiktok_user:tiktok_pass@localhost:5432/tiktok_ads_automation?schema=public

# Prisma設定
PRISMA_LOG_LEVEL=info

# ----------------------------------------------------------------------------
# Redis設定
# ----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ----------------------------------------------------------------------------
# JWT認証設定
# ----------------------------------------------------------------------------
JWT_SECRET=your_jwt_secret_here_change_in_production
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your_jwt_refresh_secret_here
JWT_REFRESH_EXPIRES_IN=7d

# ----------------------------------------------------------------------------
# 暗号化設定
# ----------------------------------------------------------------------------
# OAuth Token等の暗号化に使用
ENCRYPTION_KEY=your_32_character_encryption_key_here_change_this

# ----------------------------------------------------------------------------
# 外部サービス連携
# ----------------------------------------------------------------------------

# Google Sheets API（CV数・フロント販売本数取得用）
# Service Accountの認証情報（JSON形式）
GOOGLE_SERVICE_ACCOUNT_CREDENTIALS={"type":"service_account","project_id":"your_project_id","private_key_id":"xxx","private_key":"-----BEGIN PRIVATE KEY-----\nxxx\n-----END PRIVATE KEY-----\n","client_email":"xxx@xxx.iam.gserviceaccount.com","client_id":"xxx","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"xxx"}

# ----------------------------------------------------------------------------
# 訴求ごとのスプレッドシート設定
# ----------------------------------------------------------------------------

# SNS訴求
APPEAL_SNS_CV_SPREADSHEET_ID=1JlEC8rQAM3h2E7GuUplMPrLyVdA5Q3nZ0lGneC2nZvY
APPEAL_SNS_CV_SHEET_NAME=TT_オプト
APPEAL_SNS_FRONT_SPREADSHEET_ID=14xhgh-Ad-Ont1wK-L4ZOyS8KgIfvoQX7zUGImH5hwKU
APPEAL_SNS_FRONT_SHEET_NAMES=TT【OTO】,TT【3day】

# AI訴求
APPEAL_AI_CV_SPREADSHEET_ID=1FlTEktuSWOZce8h92foKoh5p8wCFFgZVM9ePqIRnUKk
APPEAL_AI_CV_SHEET_NAME=TT_オプト
APPEAL_AI_FRONT_SPREADSHEET_ID=1PvyM6JkFuQR_lc4QyZFaMX0GA0Rn0_6Bll9mjh0RNFs
APPEAL_AI_FRONT_SHEET_NAMES=TT【OTO】,TT【3day】

# デザジュク訴求（今後追加予定）
# APPEAL_DESAJUKU_CV_SPREADSHEET_ID=
# APPEAL_DESAJUKU_CV_SHEET_NAME=
# APPEAL_DESAJUKU_FRONT_SPREADSHEET_ID=
# APPEAL_DESAJUKU_FRONT_SHEET_NAMES=

# Slack通知
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#tiktok-ads-alerts

# Email (SendGrid)
SENDGRID_API_KEY=your_sendgrid_api_key
EMAIL_FROM=noreply@your-domain.com

# ----------------------------------------------------------------------------
# Vercel設定（本番環境用）
# ----------------------------------------------------------------------------
# Vercel Blob Storage (Creative保存用)
BLOB_READ_WRITE_TOKEN=your_vercel_blob_token

# Vercel KV (Redis代替)
KV_REST_API_URL=your_kv_url
KV_REST_API_TOKEN=your_kv_token
KV_REST_API_READ_ONLY_TOKEN=your_kv_readonly_token

# ----------------------------------------------------------------------------
# 監視・ログ設定
# ----------------------------------------------------------------------------

# ログレベル: debug, info, warn, error
LOG_LEVEL=debug

# Vercel Analytics
VERCEL_ANALYTICS_ENABLED=true

# Sentry (エラートラッキング)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ----------------------------------------------------------------------------
# ジョブ処理設定
# ----------------------------------------------------------------------------

# 最適化サイクル実行間隔（cron形式: 2時間ごと）
OPTIMIZATION_CRON=0 */2 * * *

# レポート取得バッチ（毎日午前6時）
REPORTING_BATCH_CRON=0 6 * * *

# BullMQ設定
BULLMQ_CONCURRENCY=5
BULLMQ_MAX_RETRY=3

# ----------------------------------------------------------------------------
# レート制限設定
# ----------------------------------------------------------------------------

# TikTok API レート制限（requests/min）
TIKTOK_API_RATE_LIMIT=600

# 並列リクエスト数
TIKTOK_API_MAX_PARALLEL=10

# ----------------------------------------------------------------------------
# 機能フラグ
# ----------------------------------------------------------------------------

# Events API（サーバーサイドCV）
FEATURE_EVENTS_API_ENABLED=false

# Webhook受信
FEATURE_WEBHOOK_ENABLED=false

# AI機能（Phase 2以降）
FEATURE_AI_OPTIMIZATION_ENABLED=false

# 実験フレームワーク
FEATURE_EXPERIMENTS_ENABLED=false

# 広告パフォーマンス追跡機能
FEATURE_AD_PERFORMANCE_ENABLED=false

# 日中CPA最適化機能（15時チェック→23:59再開）
FEATURE_INTRADAY_CPA_CHECK_ENABLED=false

# 日中CPA最適化から除外する広告主ID（カンマ区切り）
INTRADAY_EXCLUDED_ADVERTISERS=

# ----------------------------------------------------------------------------
# セキュリティ設定
# ----------------------------------------------------------------------------

# CORS許可オリジン（カンマ区切り）
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Rate Limiting (API Gateway)
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=100

# Session Secret
SESSION_SECRET=your_session_secret_here_change_in_production

# ----------------------------------------------------------------------------
# 開発環境専用設定
# ----------------------------------------------------------------------------

# Prisma Studio
PRISMA_STUDIO_PORT=5555

# デバッグモード
DEBUG=false

# Hot Reload
HOT_RELOAD=true

# ----------------------------------------------------------------------------
# 備考
# ----------------------------------------------------------------------------
# 本番環境では以下を必ず変更してください:
# - JWT_SECRET
# - JWT_REFRESH_SECRET
# - ENCRYPTION_KEY
# - SESSION_SECRET
# - DATABASE_URL（Neon本番DB）
# - TIKTOK_API_ENV=production
# - TIKTOK_API_BASE_URL（本番URL）
# - Vercel Blob Token
# - Vercel Environment Variables でシークレット管理
